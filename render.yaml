services:
  # Players Service
  - type: web
    name: players-service
    env: docker
    region: oregon
    plan: free
    dockerfilePath: ./players-service/Dockerfile
    dockerContext: .
    autoDeploy: true
    healthCheckPath: /actuator/health
    envVars:
      - key: R2DBC_URL
        value: r2dbc:postgresql://dpg-d43vto6uk2gs739i7o4g-a/clubdb_gbqx?sslMode=require
      - key: DB_USER
        value: clubuser
      - key: DB_PASSWORD
        value: czsdyLvknmnAN1IUkMnXTaIdCRbDSsLy

  # Teams Service
  - type: web
    name: teams-service
    env: docker
    region: oregon
    plan: free
    dockerfilePath: ./teams-service/Dockerfile
    dockerContext: .
    autoDeploy: true
    healthCheckPath: /actuator/health
    envVars:
      - key: R2DBC_URL
        value: r2dbc:postgresql://dpg-d43vto6uk2gs739i7o4g-a/clubdb_gbqx?sslMode=require
      - key: DB_USER
        value: clubuser
      - key: DB_PASSWORD
        value: czsdyLvknmnAN1IUkMnXTaIdCRbDSsLy

  # API Gateway
  - type: web
    name: api-gateway
    env: docker
    region: oregon
    plan: free
    dockerfilePath: ./api-gateway/Dockerfile
    dockerContext: .
    autoDeploy: true
    healthCheckPath: /actuator/health
    envVars:
      - key: PLAYERS_URI
        value: https://players-service.onrender.com
      - key: TEAMS_URI
        value: https://teams-service.onrender.com
